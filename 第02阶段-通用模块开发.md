# ç¬¬äºŒé˜¶æ®µï¼šä¸šåŠ¡ä»£ç å¼€å‘

## é€šç”¨åŠŸèƒ½æ¨¡å—

#### 1ã€é€šç”¨å·¥å…·çš„å°è£…

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70honsfbrj30sy0fkgmb.jpg)

#### 2ã€é¡µé¢å¸ƒå±€

å¸ƒå±€ä¸€ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70hqlc9k2j30tq0f8gma.jpg)

å¸ƒå±€äºŒï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70hsylpfxj30uw0f83zb.jpg)

å¸ƒå±€ä¸‰ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70hvt5e32j30v60g2jsi.jpg)

é¡µé¢å¸ƒå±€æŠ€å·§ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70hxt44v8j30uy0g20t7.jpg)

é¡µé¢ç¾åŒ–åŸºç¡€ï¼š

1ï¼‰å¼ºè¿«ç—‡èˆ¬åœ°å¯¹é½

2ï¼‰å¯¹ç§°ç¾

3ï¼‰æ‰å¹³åŒ–è®¾è®¡

4ï¼‰ä¿æŒä¸€å®šçš„è·ç¦»

5ï¼‰é…è‰²æ˜¯ä¸€é—¨å­¦é—®ï¼Œç°è‰²æ¯”è¾ƒç™¾æ­

#### 3ã€é€šç”¨å¯¼èˆªæ¡çš„å¼€å‘

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70i4s40opj30v40gomxy.jpg)

#### 4ã€é€šç”¨é¡µé¢å¤´éƒ¨çš„å¼€å‘

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70i66o1jgj30uw0ey0td.jpg)

#### 5ã€é€šç”¨ä¾§è¾¹å¯¼èˆªçš„å¼€å‘

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70i7dr88pj30qm0hc74z.jpg)

#### 6ã€é€šç”¨ç»“æœæç¤ºé¡µçš„å¼€å‘

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70i91yigfj30uw0b2jrn.jpg)

=============================================

#### 7ã€å°è£…å·¥å…·ç±»

åœ¨utilç›®å½•ä¸‹åˆ›å»ºmm.jsæ–‡ä»¶ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª_mmå¯¹è±¡å¹¶å¸¦å‡ºï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70ieu4kysj30k405cglm.jpg)

åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢ï¼Œæˆ‘ä»¬é¦–å…ˆå®ç°requestæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70ikqu2baj30pm0be3zh.jpg)

è¯·æ±‚æˆåŠŸæ—¶(æ¯”å¦‚200)çš„å›è°ƒï¼Œå¦‚ä¸‹ï¼š

success: function(res){
        // è¯·æ±‚æˆåŠŸ
        if(0 === res.status){
          typeof param.success === 'function' && param.success(res.data, res.msg);
          //æ²¡æœ‰ç™»å½•çŠ¶æ€ï¼Œéœ€è¦å¼ºåˆ¶ç™»å½•
        }else if(10 === res.status){
          _this.doLogin();
          //è¯·æ±‚æ•°æ®é”™è¯¯
        }else if(1 === res.status){
          typeof param.error === 'function' && param.error(res.msg);
        }
      },

å…¶ä¸­çš„ã€å¼ºåˆ¶ç™»å½•å‡½æ•°ã€‘å¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70it89pazj311207q0t0.jpg)

éœ€è¦ç¼“å­˜ä¸€ä¸‹thisï¼Œä¸ºäº†é˜²æ­¢thisçš„æŒ‡å‘ä¸æ˜ã€‚å¦‚ä¸‹ï¼š

var _this = thisï¼›

è¿™æ ·æ‰å¯ä»¥è°ƒç”¨ï¼Œå¦‚ä¸‹ï¼š

_this.doLogin();

==================================

è¯·æ±‚å¤±è´¥æ—¶çš„å‡½æ•°å°è£…(æ¯”å¦‚404ã€503)ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70ivp6nvrj315i044t8p.jpg)

ç„¶åå¼€å§‹ä½¿ç”¨ï¼Œåœ¨index/index.jsä¸‹ï¼Œå¦‚ä¸‹ï¼š

var _mm = require('util/mm.js');

ä½†æ˜¯è¿™ä¸ªutilè·¯å¾„æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ

==========================================

ä½çº§é”™è¯¯

1ã€æ‹¬å·çš„åŒ¹é…     ERROR     > }

2ã€ä»£ç çš„è§„èŒƒ

3ã€ç¼–è¾‘å™¨çš„é…ç½®   æ–‡å­—å¤§å°   æ–‡å­—é¢œè‰²

4ã€ä¸­æ–‡å­—ç¬¦    ä¸­æ–‡é€—å·  åˆ†å·

5ã€å•è¯çš„æ‹¼å†™   param--------parm   data-------date

6ã€æ–‡ä»¶å¤¹å¸¦ç©ºæ ¼çš„

7ã€æ¨¡å—æ‰¾ä¸åˆ°     1ï¼‰é”™è¯¯çš„æ“ä½œ  

é‡æ–°å®‰è£…    cnpm  install 

8ã€ç¬”è®°ï¼šæŠ¥é”™

IT    100%

==========================================

#### 8ã€è·¯å¾„çš„é…ç½®

åœ¨webpack.config.jsæ–‡ä»¶ä¸­ï¼Œåœ¨configå¯¹è±¡ä¸­ï¼Œé…ç½®è·¯å¾„å¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70j7es0prj311o0beglz.jpg)

é¦–å…ˆæµ‹è¯•æ¨¡å—æ˜¯å¦ç”Ÿæ•ˆï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70jbznrgrj30l604k0ss.jpg)

æ”¹è¿›è·¯å¾„çš„å†™æ³•ï¼Œå¦‚ä¸‹ï¼š

var path = require('path');

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70jocd0ltj31620hgdh6.jpg)

#### 9ã€é…ç½®ç½‘ç»œæ¥å£

åœ¨webpack.config.jsæ–‡ä»¶ä¸­ï¼Œå®šä¹‰æ¥å£å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹ï¼š

// æ¥å£å­—ç¬¦ä¸²
var str = new Buffer('aHR0cDovL3Rlc3QuaGFwcHltbWFsbC5jb20v', 'base64');

é€šè¿‡devServeré…ç½®ä»£ç†ï¼Œå®ç°è·¨åŸŸï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70ju88ia6j315o0ey0t8.jpg)

#### 10ã€æµ‹è¯•çœŸå®æ•°æ®

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70jdqpotaj314y0e0mxj.jpg)

#### 11ã€è·å–æœåŠ¡å™¨åœ°å€

åœ¨util/mm.jsæ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹ï¼š

var conf = {
  serverHost : ''
}

//è·å–æœåŠ¡å™¨åœ°å€
  getServerUrl: function(path){
    return conf.serverHost + path
  },

#### 12ã€è·å–å¹¶æµ‹è¯•URLå‚æ•°

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70k3w7vnkj3168082dg9.jpg)

è¯¦è§£ï¼šæ¯”å¦‚æœ‰ä¸€ä¸ªURLåœ°å€å¦‚ä¸‹ï¼š

www.baidu.com/product/list?keyword=xxx&page=1

ç¬¬ä¸€æ­¥ï¼Œé¦–å…ˆæƒ³åŠæ³•å¾—åˆ°keyword=xxx&page=1

ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨&ç¬¦å·åˆ†å‰²ï¼Œå¾—åˆ°keyword=xxxå’Œpage=1

keyword=xxx

ç¬¬ä¸‰æ­¥ï¼Œå¾—åˆ°é‡Œé¢çš„xxx

ä½¿ç”¨ã€æ­£åˆ™è¡¨è¾¾å¼ã€‘æ¥å¤„ç†ï¼š

å­—ç¬¦ä¸²å¯èƒ½æ˜¯ã€ç©ºã€‘æˆ–è€…ã€&ç¬¦å·ã€‘           å³(^|&)

åé¢æ˜¯name

ç„¶åæ˜¯å‚æ•°å­—ç¬¦ä¸²ï¼Œç”¨é&è¡¨ç¤ºï¼ŒåŒ¹é…å¤šä¸ªï¼Œå³

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g70kij27izj309o02g74b.jpg)

ä»¥&ç»“æŸæˆ–è€…ä»¥å­—ç¬¦ä¸²çš„æœ«å°¾ç»“æŸã€‚

==================================================

å¼€å§‹æå–ï¼š

window.location.searchå°±æ˜¯URLä¸­é—®å·åŠå³è¾¹çš„å‚æ•°ï¼Œç„¶åå–substr(1)

å°±æ˜¯æŠŠé—®å·å»æ‰ã€‚å¾—åˆ°keyword=xxx&page=1éƒ¨åˆ†ã€‚ç„¶åç”¨

keyword=xxx&page=1å»match(reg)ã€‚å¦‚æœå­˜åœ¨åŒ¹é…åˆ°çš„ç»“æœçš„è¯ï¼Œé‚£ä¹ˆ

resultä¼šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œresultä¼šæ˜¯ä¸€ä¸ªnullã€‚åŒ¹é…åçš„ç¬¬2ä¸ªå…ƒç´ å°±æ˜¯æˆ‘ä»¬æƒ³å¾—åˆ°çš„å€¼ã€‚å³result[2]ã€‚ä½†æ˜¯è¿™ä¸ªresult[2]æ˜¯ç»è¿‡encodeURIComponentå‡½æ•°ç¼–ç çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨decodeURIComponentå¯¹encodeURIComponentç¼–ç çš„å­—ç¬¦ä¸²è¿›è¡Œè§£ç ï¼Œè¿™æ ·æ‰èƒ½è¯†åˆ«ï¼Œå¦åˆ™æ˜¯ã€ä¹±ç ã€‘ä¸€æ ·çš„encodeURIComponentç±»å‹çš„ç¼–ç å­—ç¬¦ä¸²ã€‚

æµ‹è¯•æ–¹æ³•ï¼š

åœ¨index/index.jsä¸‹ï¼Œæ‰“å°ï¼š

console.log(_mm.getUrlParam('test'));

ç„¶åè¿è¡Œé¡¹ç›®ï¼Œå¹¶åœ¨æµè§ˆå™¨çš„åœ°å€æ æ·»åŠ testçš„å‚æ•°ï¼Œå¦‚ä¸‹ï¼š

å•å‚æ•°æµ‹è¯•ï¼šlocalhost:8088/dist/view/index.html?test=123

å¤šå‚æ•°æµ‹è¯•ï¼šlocalhost:8088/dist/view/index.html?key=value&&test=123

===================================================

#### 13ã€hoganåŠ¨æ€æ¸²æŸ“htmlæ¨¡æ¿åŠŸèƒ½

å…ˆå®‰è£…hogan.jsï¼Œå®‰è£…æ–¹æ³•ï¼š

sudo cnpm install hogan.js  --save   åˆ°ç”Ÿäº§ç¯å¢ƒä¸‹

åœ¨mm.jsä¸­å¼•å…¥ï¼š

var Hogan = require('hogan.js');

éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š1ã€æ¨¡æ¿   2ã€æ•°æ®

ç„¶åå‡½æ•°ä¼šå¯¹æ¨¡æ¿å’Œæ•°æ®è¿›è¡Œæ‹¼æ¥ã€‚

//æ¸²æŸ“htmlæ¨¡æ¿
  renderHtml: function(htmlTemplate, data){
    //Hoganç¼–è¯‘æ¨¡æ¿,æ¨¡æ¿æ¸²æŸ“æ•°æ®
    var template = Hogan.compile(htmlTemplate),

â€‹      result = template.render(data);
â€‹      //å°†æ¸²æŸ“çš„ç»“æœå¯¹è±¡è¿”å›
â€‹      return result;
  },

åœ¨index.jsæ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹ï¼š

var _mm = require('util/mm.js');

var html = '<div>{{data}}</div>';

var data = {

â€‹	data: 123

}

console.log(_mm.renderHtml(html, data));

======================================

#### 14ã€é€šç”¨æç¤ºåŠŸèƒ½

//æˆåŠŸæç¤º
  successTips: function(msg){
    alert(msg || 'æ“ä½œæˆåŠŸï¼')
  },
  //é”™è¯¯æç¤º
  errorTips: function(msg){
    alert(msg || 'å“ªé‡Œä¸å¯¹äº†ï¼')
  },

#### 15ã€å­—æ®µçš„éªŒè¯ï¼Œæ”¯æŒéç©ºã€æ‰‹æœºã€é‚®ç®±çš„åˆ¤æ–­

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g72fa2tdb9j31e40mg75e.jpg)

#### 16ã€è·³å›ä¸»é¡µ

//è·³å›ä¸»é¡µ
  goHome: function(){
    window.location.href = './index.html';
  }

#### 17ã€é€šç”¨UIå¸ƒå±€å’Œæ ·å¼å¼€å‘

åœ¨src/page/commonç›®å½•ä¸‹åˆ›å»ºindex.jsæ–‡ä»¶å’Œlayout.cssæ–‡ä»¶

ç„¶ååœ¨index.jsæ–‡ä»¶ä¸­å¼•å…¥layout.cssæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

require('./layout.css');

ç„¶åæˆ‘ä»¬ä¿®æ”¹ä¹‹å‰çš„layoutç›®å½•ä¸‹çš„html-head.htmlæ–‡ä»¶åä¸º

head-common.htmlï¼Œå†…å®¹ä¿®æ”¹æˆå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g72fmw7ivmj316g06kt93.jpg)

åœ¨index.htmlä¸­ï¼Œå†…å®¹ä¿®æ”¹æˆå¦‚ä¸‹ï¼š

<head>
	   <%= require('html-loader!./layout/head-common.html') %>
	   <title><%= htmlWebpackPlugin.options.title%> - TMailStoreç”µå•†å¹³å°</title>
</head>

å…¶å®åœ¨index.htmlä¸­ç›´æ¥å¼•ç”¨jqueryä¹Ÿæ˜¯ä¸å¤ªå¯¹çš„ï¼Œå› ä¸ºæ¯ä¸ªé¡µé¢éœ€è¦å¼•ç”¨ä¸€æ¬¡jqueryçš„è¯ä¹Ÿæ˜¯ä¼šæœ‰å¤ªå¤šçš„é‡å¤ã€‚æ‰€ä»¥å¯ä»¥å°†å…¶æ”¾åˆ°footer.htmlä¸­ã€‚

#### 18ã€footer.htmlæ–‡ä»¶çš„è®¾è®¡

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g72g17s2qmj31mc0l075p.jpg)

footer.htmlæ–‡ä»¶æ”¾åœ¨layoutç›®å½•ä¸‹ã€‚

åœ¨index.htmlæ–‡ä»¶ä¸­å¼•å…¥footer.htmlæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

<%= require('html-loader!./layout/footer.html') %>

#### 19ã€æµ‹è¯•layout.cssæ˜¯å¦ç”Ÿæ•ˆä¸css resetéƒ¨åˆ†

body{

â€‹	background: #000;

}

ç„¶åè§‚å¯Ÿé¡µé¢çš„é¢œè‰²ã€‚

å¦‚æœå¯ä»¥ï¼Œæˆ‘ä»¬ç»§ç»­å®Œæˆ  css resetéƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š

/* css reset */
\*{
  margin: 0;
  padding: 0;
}
body{
  background: #F6F6F6;
  /*è¡¨ç¤ºè¡Œé—´è·æ˜¯1.5å€çš„æ„æ€*/
  font: 12px/1.5 tahoma, arial, "Microsoft YaHei", sans-serif;
}
li{
  list-style: none;
}
img{
  display: block;
  border: none;
}
label{
  cursor: pointer;
}
input[type='checkbox']{
  cursor: pointer;
}

#### 20ã€å®šå®½å¸ƒå±€å’Œå…¨å±€é€šç”¨æ ·å¼

/*å®šå®½å¸ƒå±€*/
.w{
  width: 1080px;
  margin: 0 auto;
  position: relative;
  /*æ¸…é™¤æµ®åŠ¨å’Œè¶…å‡ºéšè—*/
  overflow: hidden;
}

/*å…¨å±€é€šç”¨æ ·å¼*/
/*éšè—ç±»*/
.hide{
  display: none;
}
/*è¶…é“¾æ ·å¼*/
.link{
  color: #999;
  cursor: pointer;
  text-decoration: none;
}
.link:hover{
  color: #E80012;
}
.link-text{
  color: #999;
  text-decoration: none;
}
/* btn */
.btn{
  display: inline-block;
  padding: 0 20px;
  height: 40px;
  line-height: 40px;
  vertical-align: middle;
  border: none;
  background: #C60023;
  font-size: 17px;
  font-weight: bold;
  color: #fff;
  outline: none;
  cursor: pointer;
  text-decoration: none;
}
.btn-mini{
  height: 25px;
  line-height: 25px;
  font-size: 12px;
  padding: 0 10px;
}
/\* loading */
.loading{
  margin: 10px auto;
  display: block;
  width: 65px;
  height: 65px;
  border: 1px solid #ddd;
  border-radius: 5px;
  opacity: .5;
  background: url("../../image/icon/loading.gif") no-repeat;
}

åœ¨index.htmlæ–‡ä»¶ä¸­æµ‹è¯•ï¼Œå¦‚ä¸‹:

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g7414pjwwtj31100fatby.jpg)

============================================================

#### 21ã€å¼•å…¥font-awesomeå­—ä½“åº“

å®‰è£…æ‰§è¡Œï¼šsudo cnpm install  font-awesome --save + å›è½¦

åœ¨common/index.jsæ–‡ä»¶ä¸­å¼•å…¥font-awesomeå­—ä½“åº“ï¼Œå¦‚ä¸‹ï¼š

æ­£ç¡®çš„å¼•å…¥æ–¹æ³•ï¼šâœ…ï¼š

require('node_modules/font-awesome/css/font-awesome.min.css');

é”™è¯¯çš„å¼•å…¥æ–¹æ³•ï¼šâŒ ï¼š require(font-awesome);

é…ç½®node_modulesçš„è·¯å¾„åˆ«åï¼š

åœ¨webpack.config.jsä¸­ï¼Œ

resolve: {
    alias: {
      node_modules: path.resolve(__dirname, 'node_modules')
    }
  },

ç„¶åæ£€æŸ¥æ”¯æŒå„ç§å­—ä½“åº“çš„loaderï¼Œå¦‚ä¸‹ï¼š

{
		test:/\.(gif|png|jpg|woff|svg|eot|ttf).??.*$/, 
		loader: 'url-loader?limit=100&name=resource/[name].[ext]'
}

çœ‹æ˜¯å¦å†™äº†|woff|svg|eot|ttf  è¿™éƒ¨åˆ†å†…å®¹ã€‚æ‰“åŒ…çš„æ—¶å€™å¯ä»¥åœ¨distç›®å½•ä¸‹çš„

resourceä¸­ç”Ÿæˆç›¸åº”çš„å­—ä½“åº“ã€‚å¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g7630h1qd7j30rg0dut90.jpg)

æµ‹è¯•å­—ä½“åº“æ˜¯å¦ç”Ÿæ•ˆï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g741mvf2t7j30ry04074o.jpg)

çœ‹æ•ˆæœã€‚

#### 22ã€é€šç”¨å¯¼èˆªå¼€å‘(UIå±‚)

1ï¼‰åªå¸¦LOGOå›¾æ ‡çš„ç®€å•å¯¼èˆªæ¡å¼€å‘

åœ¨layoutç›®å½•ä¸­æ–°å»ºnav-simple.htmlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g741um6nc8j30yk07kwek.jpg)

ç„¶åå°†å…¶å¼•è¿›å…¥index.htmlä¸­ï¼š

<%= require('html-loader!./layout/nav-simple.html') %>

ç„¶ååˆ›å»ºå’Œnav-simple.htmlæ–‡ä»¶å¯¹åº”çš„csså’Œjsæ–‡ä»¶ï¼Œå³åœ¨commonç›®å½•ä¸­

åˆ›å»ºnav-simpleæ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»ºindex.csså’Œindex.jsæ–‡ä»¶

åœ¨index.jsæ–‡ä»¶ä¸­å¼•å…¥index.cssæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

'use strict';
require('./index.css');

æ¥ç€åœ¨index/index.jsæ–‡ä»¶ä¸‹å¼•å…¥ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g7422x89opj30xk06w3zo.jpg)

ç„¶åæˆ‘ä»¬å¼€å§‹å†™nav-simple/index.cssæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

.nav-simple{
  height: 60px;
  line-height: 60px;
  border-bottom: 1px solid #ddd;
  background: #fff;
}
.nav-simple .logo{
  font-size: 26px;
  font-weight: bold;
  color: #C60023;
  text-decoration: none;
}



===================================================

2ï¼‰navå¯¼èˆªçš„å¼€å‘

åœ¨layoutç›®å½•ä¸‹åˆ›å»ºnav.htmlæ–‡ä»¶å¹¶å¼€å‘HTMLç»“æ„ã€‚ã€‚ã€‚

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g76yb79z4vj31460u0412.jpg)

åœ¨common/navç›®å½•ä¸‹åˆ›å»ºindex.jså’Œindex.cssæ–‡ä»¶å¹¶å¼€å‘ã€‚ã€‚ã€‚

'use strict';
require('./index.css');

åœ¨index/index.jsä¸­æµ‹è¯•ï¼š

require('@/common/nav/index.js');

æµ‹è¯•æ ·å¼çœ‹æ•ˆæœã€‚

========================================

ç»§ç»­å®Œæˆindex.cssæ ·å¼æ–‡ä»¶ï¼š

.nav{
  background: #EEEEEE;
  height: 30px;
  line-height: 30px;
}
/*ç”¨æˆ·éƒ¨åˆ†*/
.nav .user{
  float: left;
}
.nav .user.login{
  display: none;
}
.nav .user .link{
  margin-right: 5px;
}
/*å¯¼èˆªé“¾æ¥éƒ¨åˆ†*/
.nav .nav-list{
  float: right;
}
.nav .nav-list .nav-item{
  display: inline-block;
  margin-left: 5px;
}

####23ã€é€šç”¨å¯¼èˆªå¼€å‘(é€»è¾‘å±‚)

åœ¨common/nav/index.jsä¸­ï¼Œå¦‚ä¸‹ï¼š

var nav = {  };

module.exports = nav.init();

å®šä¹‰ä¸€äº›æ–¹æ³•ï¼Œå¦‚ï¼š

//åˆå§‹åŒ–

initï¼š functionï¼ˆï¼‰{

â€‹	this.bindEvent();

â€‹	this.loadUserInfo();

â€‹	this.loadCartCount();

   //è¿”å›navå¯¹è±¡æœ¬èº«ï¼Œä¿è¯ç»™module.exportsçš„è¿˜æ˜¯navå¯¹è±¡

â€‹	return  this;

},

//ç»‘å®šäº‹ä»¶

bindEvent: function(){

},

//åŠ è½½ç”¨æˆ·ä¿¡æ¯

loadUserInfo: function(){

},

//åŠ è½½è´­ç‰©è½¦æ•°é‡(è¯·æ±‚æ¥å£)

loadCartCount: function(){

}

####24ã€å¼€å‘bindEventå‡½æ•°

var _mm = require('util/mm.js');

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g7431gwbobj319u0qadh0.jpg)

ã€æ³¨æ„ã€‘ç‚¹å‡»é€€å‡ºæŒ‰é’®ä¹‹åè¦åšåˆ·æ–°çš„é€»è¾‘å’ŒæŠ¥é”™çš„é€»è¾‘

####25ã€ã€é€€å‡ºæŒ‰é’®ã€‘æœåŠ¡å¼€å‘

åœ¨serviceç›®å½•ä¸‹åˆ›å»ºuser-service.jsæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

'use strict';
var _mm = require('util/mm.js');

var  _user = { 

}

module.exports = _user;

é€€å‡ºçš„æœåŠ¡é€»è¾‘ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g743fmbklwj310y0bg74i.jpg)

åœ¨common/nav/index.jsä¸­ï¼Œå¦‚ä¸‹ï¼š

var  _user = require('service/user-service.js');

serviceçš„è·¯å¾„éœ€è¦åœ¨åˆ«åä¸­è¿›è¡Œé…ç½®ã€‚

####26ã€å¼€å‘loadUserInfoå‡½æ•°

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g743l3ol5lj319m0bodga.jpg)

æ£€æŸ¥ç™»å½•çŠ¶æ€çš„æœåŠ¡å¼€å‘ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g743ozjbftj315o0bmq38.jpg)

####27ã€å¼€å‘loadCartCountå‡½æ•°

åœ¨common/nav/index.jsæ–‡ä»¶ä¸­ï¼š

var  _cart = require('service/cart-service.js');

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g743t6n4thj318m0b274r.jpg)

#### 28ã€ã€è·å–è´­ç‰©è½¦æ•°é‡ã€‘æœåŠ¡å¼€å‘

åœ¨serviceç›®å½•ä¸­åˆ›å»ºcart-service.jsæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

'use strict';
var _mm = require('util/mm.js');

var _cart = { 

};

module.exports = _cart;

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g7440swc90j315a0bu74l.jpg)

#### 29ã€é€šç”¨footerå¼€å‘

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75vo9b5wdj31mc0n6jsv.jpg)

åœ¨common/index.jsä¸­å¼•å…¥ï¼Œå¦‚ä¸‹ï¼š

require('./footer/index.css');

åœ¨commonä¸‹åˆ›å»ºfooterç›®å½•å’Œindex.cssæ–‡ä»¶ï¼Œæ ·å¼å¦‚ä¸‹ï¼š

.footer{
  padding-bottom: 10px;
}
.footer .links{
  text-align: center;
  color: #666666;
  line-height: 30px;
}
.footer .links .link{
  padding: 0 10px;
}
.footer .copyright{
  text-align: center;
  color: #666666;
  line-height: 30px;
}

#### 30ã€é€šç”¨headerå¼€å‘

åœ¨layoutä¸­åˆ›å»ºhead.htmlæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

<div class="header">
  <div class="w">
    <a class="logo" href="./index.html">TMALL</a>
    <div class="search-con">
      <input class="search-input" id="search-input" placeholder="è¯·è¾“å…¥å•†å“åç§°"/>
      <button class="btn search-btn" id="search-btn">æœç´¢</button>
    </div>
  </div>
</div>

æµ‹è¯•ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75vxdomvpj30po07675c.jpg)

åœ¨commonä¸‹åˆ›å»ºheaderç›®å½•ï¼Œå¹¶åˆ›å»ºindex.jså’Œindex.cssæ–‡ä»¶

åœ¨index.jsæ–‡ä»¶ä¸­æ­å»ºå¦‚ä¸‹ç»“æ„ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75w2npoa2j30p408gdgm.jpg)

åœ¨index/index.jsæ–‡ä»¶ä¸­å¼•å…¥ï¼Œå¦‚ä¸‹ï¼š

require('@/common/header/index.js');

åœ¨common/header/index.cssæ–‡ä»¶ä¸­å†™æ ·å¼ï¼š

/*é€šç”¨å¤´éƒ¨å¯¼èˆª*/
.header .logo{
  position: absolute;
  left: 60px;
  top: 34px;
  display: block;
  font-size: 36px;
  color: #C60023;
  font-weight: bold;
  text-decoration: none;
}
.header .search-con{
  padding: 40px 0 30px 250px;
}
.header .search-con .search-input{
  width: 550px;
  height: 40px;
  line-height: 40px;
  padding-left: 10px;
  font-size: 15px;
  border: 2px solid #C60023;
  outline: none;
}
.header .search-con .search-btn{
  position: absolute;
  height: 44px;
  width: 80px;
}

#### 31ã€å…³é”®å­—å›å¡«åŠŸèƒ½

åœ¨common/header/index.jsæ–‡ä»¶ä¸­çš„headerå¯¹è±¡ä¸­å®šä¹‰å¦‚ä¸‹çš„æ–¹æ³•ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75wge0zajj310c0csdge.jpg)

å¹¶åœ¨initæ–¹æ³•ä¸­è°ƒç”¨ã€‚å¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75whgucyej30pk05cwef.jpg)

#### 32ã€äº‹ä»¶ç»‘å®šå’Œæœç´¢æäº¤åŠŸèƒ½

åœ¨common/header/index.jsæ–‡ä»¶ä¸­ï¼Œå®šä¹‰bindEventæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75wl07f6sj317i0hsmxy.jpg)

æäº¤æœç´¢ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75wsoxb6yj31900ec3z7.jpg)

æ­¤æ—¶viewç›®å½•ä¸‹é¢çš„index.htmlæ–‡ä»¶å¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75x8u6wyej31ho0g6aaw.jpg)

åœ¨index/index.jsæ–‡ä»¶ä¸­å¯¼å…¥navï¼Œå¦‚ä¸‹ï¼š

require('@/common/nav/index.js');

=========================================

#### 33ã€é€šç”¨ä¾§è¾¹å¯¼èˆªå¼€å‘

åœ¨layoutä¸­åˆ›å»ºnav-side.htmlæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g75xmeqrv7j317g0hk758.jpg)

åœ¨commonç›®å½•ä¸‹åˆ›å»ºnav-sideç›®å½•ï¼Œå†…åˆ›å»ºindex.jså’Œindex.cssæ–‡ä»¶ã€‚

index.jsæ–‡ä»¶çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š

'use strict';
require('./index.css');
var _mm = require('util/mm.js');

//ä¾§è¾¹å¯¼èˆª
var navSide = {

}
module.exports = navSide;   

======================================

åœ¨index.cssæ–‡ä»¶ä¸­ï¼Œå®šä¹‰æ ·å¼å¦‚ä¸‹ï¼š

/*å¯¼èˆªä¸»ä½“*/
.nav-side{
  float: left;
  width: 130px;
  /*åŒæ—¶æœ‰å®½åº¦å’Œé«˜åº¦æ‰ä¼šå ä¸€ä¸ªä½ç½®ï¼Œå¦åˆ™ä½ç½®ä¼šé—ª*/
  min-height: 100px;
}
.nav-side .nav-item{
  line-height: 25px;
  font-size: 13px;
}
.nav-side .nav-item .link{
  color: #888;
}
.nav-side .nav-item.active .link{
  color: #C60023;
}

====================================

åœ¨index/index.jsæ–‡ä»¶ä¸­å¯¼å…¥nav-sideï¼Œå¦‚ä¸‹ï¼š

var navSide = require('@/common/nav-side/index.js');

====================================

ç»§ç»­åœ¨common/nav-side/index.jsæ–‡ä»¶ä¸­å®ç°é€»è¾‘ï¼Œå¦‚ä¸‹ï¼š

å…ˆå»ºç«‹ä¸€ä¸ªå¾…åŠ¨æ€æ¸²æŸ“çš„é¡¹çš„æ¨¡æ¿ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79ckehyc4j311l0u0ab5.jpg)

====================================

å†å®Œæˆåˆå§‹åŒ–çš„é€»è¾‘ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79cfwl4ytj31660bowf8.jpg)

ç»§ç»­å†™renderNavå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79chhof36j31cg0rk40t.jpg)

åœ¨common/nav-sideç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªindex.stringçš„æ¨¡æ¿æ–‡ä»¶ï¼Œå°†index.stringæ–‡ä»¶å¼•å…¥åˆ°common/nav-side/index.jsæ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œå¦‚ä¸‹ï¼š

var templateIndex = require('./index.string');

ç„¶åæˆ‘ä»¬å®Œå–„è¿™ä¸ªtemplateIndexæ¨¡æ¿çš„å†…å®¹ï¼Œå³æŠŠä¸‹é¢çš„è¿™ä¸ªç»“æ„ã€å‰ªåˆ‡ã€‘åˆ°index.stringä¸­ï¼Œå¦‚ä¸‹ï¼š

<!--ä¸‹é¢æ˜¯é™æ€æ¸²æŸ“ï¼Œå½“åŠ¨æ€æ¸²æŸ“çš„æ—¶å€™ä¼šå°†æ¸²æŸ“çš„å†…å®¹æ”¾åˆ°ulå®¹å™¨ä¸­-->
  <li class="nav-item">
    <a class="link" href="">ä¸ªäººä¸­å¿ƒ</a>
  </li>
  <li class="nav-item active">
    <a class="link" href="">æˆ‘çš„è®¢å•</a>
  </li>
  <li class="nav-item">
    <a class="link" href="">å…³äºTMALL</a>
  </li>

åŒæ—¶æˆ‘ä»¬è¦ç”¨å¾ªç¯æ¥å®ç°æ¸²æŸ“å¤šæ¡æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªä¿ç•™ä¸€æ¡æ•°æ®å³å¯ï¼Œ

ä¿®æ”¹å¦‚ä¸‹ï¼š

<li class="nav-item">
    <a class="link" href="">ä¸ªäººä¸­å¿ƒ</a>
</li>

æ¥ç€å°†å®ƒæŒ‰éœ€æ±‚æ”¹æˆå¦‚ä¸‹çš„å½¢å¼ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79csv2vtbj316y0dqdg9.jpg)

å¦‚æœè¿™ä¸ªæ—¶å€™å»ç¼–è¯‘çš„è¯æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®©webpackæ”¯æŒstringç±»å‹çš„æ–‡ä»¶çš„æ‰“åŒ…ã€‚æˆ‘ä»¬éœ€è¦åœ¨webpack.config.jsæ–‡ä»¶ä¸­æ·»åŠ loaderï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79cz9nj46j31go0nmmy1.jpg)

ç„¶ååœ¨index/index.jsæ–‡ä»¶ä¸­è°ƒç”¨initå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š

//æµ‹è¯•ä¸ªäººä¸­å¿ƒé¡µ

navSide.init({
  name: 'user-center'
});

//æµ‹è¯•æˆ‘çš„è®¢å•é¡µ

navSide.init({
  name: 'order-list'
});

//æµ‹è¯•ä¿®æ”¹å¯†ç é¡µ

navSide.init({
  name: 'user-pass-update'
});

é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæ‰§è¡Œï¼šsudo cnpm run dev + å›è½¦

================================================

#### 34ã€é€šç”¨æ“ä½œæç¤ºé¡µå¼€å‘

é¦–å…ˆåœ¨webpack.config.jsæ–‡ä»¶ä¸­æ·»åŠ ï¼š

'user-result': './src/page/user-result/index.js',

æ·»åŠ é¡µé¢ï¼š

new HtmlWebpackPlugin(getHtmlConfig('user-result', 'æ“ä½œç»“æœ')),

é‡å¯æœåŠ¡ï¼Œå†å»src/pageç›®å½•ä¸‹åˆ›å»ºuser-resultç›®å½•ï¼Œå¹¶åˆ›å»ºindex.csså’Œindex.jsæ–‡ä»¶ï¼Œå†åœ¨viewç›®å½•ä¸‹åˆ›å»º

user-result.htmlæ–‡ä»¶ã€‚å¯ä»¥å»index.htmlæ–‡ä»¶ä¸­æ‹·è´åŸºç¡€æ¨¡æ¿

<!DOCTYPE html>
<html lang="en">
  <head>
     <%= require('html-loader!./layout/head-common.html') %>
     <title><%= htmlWebpackPlugin.options.title%> - storeTMallç”µå•†å¹³å°</title>
  </head>
================================

<%= require('html-loader!./layout/footer.html') %>
  </body>
</html>

================================

å…¶ä¸­çš„<title><%= htmlWebpackPlugin.options.title%> - storeTMallç”µå•†å¹³å°</title>

è¿™ä¸€å¥ä¸­çš„titleéœ€è¦åœ¨webpack.config.jsä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79e6a62jyj317g0hi751.jpg)

åŒæ ·ï¼Œåœ¨åˆ›å»ºé¡µé¢å¯¹è±¡çš„æ—¶å€™ä¹Ÿéœ€è¦ä¼ å‚æ•°ï¼Œå¦‚ä¸‹ï¼š

new HtmlWebpackPlugin(getHtmlConfig('index', 'é¦–é¡µ')),

new HtmlWebpackPlugin(getHtmlConfig('user-result', 'æ“ä½œç»“æœ')),

new HtmlWebpackPlugin(getHtmlConfig('user-login', 'ç”¨æˆ·ç™»å½•')),

åªè¦åŠ¨äº†webpackçš„é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦é‡å¯æœåŠ¡ã€‚

sudo cnpm run  dev + å›è½¦

ç„¶åç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š

localhost:8088/dist/view/user-result.html + å›è½¦

===============================================

user-result.htmlæ–‡ä»¶åˆå§‹å†…å®¹å¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79eiqcg52j31e80iajs8.jpg)

éœ€è¦æ·»åŠ nav-simpleæœ€ç®€å¯¼èˆªç»„ä»¶ï¼š

<%= require('html-loader!./layout/nav-simple.html')%>

åœ¨page/user-result/index.jsä¸­å¯¼å…¥ï¼š

require('../common/nav-simple/index.js');

===============================================

æ³¨å†ŒæˆåŠŸæç¤ºé¡µï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79ekyt510j311a0923yy.jpg)

================================================

ç„¶ååœ¨user-result/index.jsæ–‡ä»¶ä¸­å†™è„šæœ¬ï¼Œå¦‚ä¸‹ï¼š

'use strict';
require('./index.css');
require('@/common/nav-simple/index.js');
var _mm = require('util/mm.js');

åœ¨user-result/index.cssæ–‡ä»¶ä¸­å†™æ ·å¼ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6gy1g79eqjk34cj313m0q2t9n.jpg)

=============================================

ç„¶åå»æµè§ˆå™¨ä¸­æµ‹è¯•å¦‚ä¸‹ï¼š

localhost:8080/dist/view/user-result.html + å›è½¦

=============================================

é¦–å…ˆåœ¨user-result.htmlæ–‡ä»¶ä¸­æ·»åŠ é»˜è®¤çš„æƒ…å†µçš„HTMLç»“æ„ï¼Œå¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g7ags7d6pgj316q0b8t97.jpg)

ç„¶åå®ç°æ ¹æ®ã€å‚æ•°ã€‘è¿›è¡Œé¡µé¢é€‰æ‹©çš„é€»è¾‘ï¼Œ

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g7agrhk2gbj319a0ae3ys.jpg)

=============================================

æœ€åå»æµè§ˆå™¨ä¸­æ¨¡æ‹Ÿä¸€ä¸ªtypeï¼Œæµ‹è¯•å¦‚ä¸‹ï¼š

localhost:8080/dist/view/user-result.htmlï¼Ÿtype=register + å›è½¦

#### 35ã€æœ¬æ¨¡å—æ€»ç»“

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g7ah94duknj30ug0fw3zr.jpg)

=============================================

ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹

===================END=======================